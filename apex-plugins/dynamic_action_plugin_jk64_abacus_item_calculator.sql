prompt --application/set_environment
set define off verify off feedback off
whenever sqlerror exit sql.sqlcode rollback
--------------------------------------------------------------------------------
--
-- ORACLE Application Express (APEX) export file
--
-- You should run the script connected to SQL*Plus as the Oracle user
-- APEX_180200 or as the owner (parsing schema) of the application.
--
-- NOTE: Calls to apex_application_install override the defaults below.
--
--------------------------------------------------------------------------------
begin
wwv_flow_api.import_begin (
 p_version_yyyy_mm_dd=>'2018.05.24'
,p_release=>'18.2.0.00.12'
,p_default_workspace_id=>132722872201520402
,p_default_application_id=>650
,p_default_owner=>'MONEY'
);
end;
/
prompt --application/shared_components/plugins/dynamic_action/jk64_abacus_item_calculator
begin
wwv_flow_api.create_plugin(
 p_id=>wwv_flow_api.id(81682659269972793)
,p_plugin_type=>'DYNAMIC ACTION'
,p_name=>'JK64.ABACUS_ITEM_CALCULATOR'
,p_display_name=>'Abacus Item Calculator'
,p_category=>'INIT'
,p_supported_ui_types=>'DESKTOP'
,p_javascript_file_urls=>'#PLUGIN_FILES#jquery.abacus.min.js'
,p_plsql_code=>wwv_flow_string.join(wwv_flow_t_varchar2(
'function render ',
'  ( p_dynamic_action in apex_plugin.t_dynamic_action',
'  , p_plugin         in apex_plugin.t_plugin ',
'  )',
'return apex_plugin.t_dynamic_action_render_result',
'as',
'    l_result     apex_plugin.t_dynamic_action_render_result;',
'begin',
'    if apex_application.g_debug ',
'    then',
'        apex_plugin_util.debug_dynamic_action',
'          ( p_plugin         => p_plugin',
'          , p_dynamic_action => p_dynamic_action',
'          );',
'    end if;',
'',
'    l_result.javascript_function := q''[function() {',
'        $.each(this.affectedElements,(i,e)=>{',
'            $(e).abacus();',
'            return true;',
'        });',
'    }]'';',
'',
'    return l_result;',
'end render;'))
,p_api_version=>2
,p_render_function=>'render'
,p_standard_attributes=>'ITEM:JQUERY_SELECTOR:JAVASCRIPT_EXPRESSION:TRIGGERING_ELEMENT'
,p_substitute_attributes=>true
,p_subscribe_plugin_settings=>true
,p_help_text=>wwv_flow_string.join(wwv_flow_t_varchar2(
'Add the Abacus Calculator to any item. Allows the user to enter simple mathematical operators to calculate the value for the item, e.g. "1055.50*0.91"',
'',
'To use, add a single on Page Load dynamic action on the page, with the Action set to this plugin. Select the item(s), jQuery selector, JavaScript expression, etc. to identify which item(s) to add the feature to.',
'',
'Based on abacus.js - https://www.jqueryscript.net/form/Do-Math-Within-Input-jQuery-Abacus.html'))
,p_version_identifier=>'0.1'
,p_files_version=>2
);
end;
/
begin
wwv_flow_api.g_varchar2_table := wwv_flow_api.empty_varchar2_table;
wwv_flow_api.g_varchar2_table(1) := '6A51756572792E666E2E6162616375733D66756E6374696F6E286F7074696F6E73297B766172206F7074696F6E733D6A51756572792E657874656E64287B6572726F723A21312C636F6D6D656E743A21312C63616C63756C617465777261707065723A21';
wwv_flow_api.g_varchar2_table(2) := '312C63616C63756C6174653A21312C6F6E63616C63756C6174653A21312C6F6E656E6463616C63756C6174653A21312C6F6E72656164793A21312C6F6E666F6375733A21312C6F6E626C75723A21312C6F6E6572726F723A21312C6F6E656E7465723A21';
wwv_flow_api.g_varchar2_table(3) := '312C6F6E6573636170653A21312C6F6E696E7075743A21312C69666E756C6C3A22222C7369676E3A21307D2C6F7074696F6E73292C636F6E766572743D66756E6374696F6E28652C6E297B76617220613D2230222C6F3D22222C743D223030223B696628';
wwv_flow_api.g_varchar2_table(4) := '32213D286E3D6E7C7C286E3D322929297B743D22223B666F7228766172206C3D303B6C3C6E3B6C2B2B29742B3D537472696E6728223022297D6966282169734E614E287061727365466C6F617428652929297B6966286F3D28613D7061727365466C6F61';
wwv_flow_api.g_varchar2_table(5) := '74284D6174682E616273286529292E746F4669786564286E292E746F537472696E672829292E73756273747228612E696E6465784F6628222E22292B312C6E292E746F537472696E6728292C613D7061727365496E742861292E746F537472696E672829';
wwv_flow_api.g_varchar2_table(6) := '2C6F213D74297B612B3D222E222B6F2E7265706C616365282F5B305D2A242F672C2222297D653C30262628613D22E28892222B61297D72657475726E20617D3B72657475726E20746869732E656163682866756E6374696F6E28297B766172206E636861';
wwv_flow_api.g_varchar2_table(7) := '72733D6E657720526567457870282F5B5C215C405C235CE284965C245C255C5E5C265C3D5C5B5C5D5C5C5C275C3B5C7B5C7D5C7C5C225C3A5C3C5C3E5C3F7E5C605C5F412D5AD0902DD0AF612D7AD0B02DD18F5D2F292C63686172733D22313233343536';
wwv_flow_api.g_varchar2_table(8) := '373839302B2D2F2A2C2E20222C65727254696D65723D766F696420302C666F6375734F626A3D746869732C76616C75654261636B3D302C76616C7565596E673D302C6D657469633D6E657720526567457870282F5B5C2B5C2D5C2A5C2F5D2F292C6D6574';
wwv_flow_api.g_varchar2_table(9) := '6963493D6E657720526567457870282F5E5B5C2B5C2D5C2A5C2F5D2F292C746F56616C75654261636B3D21313B6A51756572792874686973292E626C75722866756E6374696F6E28297B696628746F56616C75654261636B26262876616C7565596E673D';
wwv_flow_api.g_varchar2_table(10) := '76616C75654261636B292C746F56616C75654261636B3D21312C6F7074696F6E732E7369676E29653D76616C7565596E673C303F222D223A22223B656C73652076617220653D22223B30213D2876616C7565596E673D4D6174682E6162732876616C7565';
wwv_flow_api.g_varchar2_table(11) := '596E6729293F282428666F6375734F626A292E76616C28652B636F6E766572742876616C7565596E6729292C6F7074696F6E732E6F6E626C757226266F7074696F6E732E6F6E626C757228666F6375734F626A2C652B636F6E766572742876616C756559';
wwv_flow_api.g_varchar2_table(12) := '6E672929293A282428666F6375734F626A292E76616C286F7074696F6E732E69666E756C6C292C6F7074696F6E732E6F6E626C757226266F7074696F6E732E6F6E626C757228666F6375734F626A2C6F7074696F6E732E69666E756C6C29297D292C6A51';
wwv_flow_api.g_varchar2_table(13) := '756572792874686973292E6B657970726573732866756E6374696F6E2865297B766172206E3B696628652E63686172436F64653F286E3D537472696E672E66726F6D43686172436F646528652E63686172436F6465292C633D652E63686172436F646529';
wwv_flow_api.g_varchar2_table(14) := '3A286E3D537472696E672E66726F6D43686172436F646528652E7768696368292C633D652E7768696368292C33373D3D637C7C33393D3D632972657475726E21303B652E6374726C4B65797C7C6E63686172732E74657374286E297C7C31333D3D652E6B';
wwv_flow_api.g_varchar2_table(15) := '6579436F64652626286F7074696F6E732E6F6E656E746572262673657454696D656F75742866756E6374696F6E28297B6F7074696F6E732E6F6E656E74657228666F6375734F626A2C76616C7565596E67297D2C313030292C666F6375734F626A2E626C';
wwv_flow_api.g_varchar2_table(16) := '75722829297D292C6A51756572792874686973292E6B657975702866756E6374696F6E2865297B69662876616C7565596E673D537472696E6728666F6375734F626A2E76616C7565292E7265706C616365282F202F672C2222292E7265706C616365282F';
wwv_flow_api.g_varchar2_table(17) := '2C2F672C222E22292C32373D3D652E6B6579436F64652972657475726E20746F56616C75654261636B3D21302C6F7074696F6E732E6F6E65736361706526266F7074696F6E732E6F6E65736361706528666F6375734F626A2C76616C75654261636B292C';
wwv_flow_api.g_varchar2_table(18) := '766F696420666F6375734F626A2E626C757228293B76617220636F6D703D6D657469632E746573742876616C7565596E67293B696628636F6D70297B696628636F6D703D6D65746963492E746573742876616C7565596E6729297B76617220745374723D';
wwv_flow_api.g_varchar2_table(19) := '537472696E672876616C75654261636B292B537472696E672876616C7565596E67293B7472797B76616C7565596E673D7061727365466C6F6174286576616C2874537472292C3130292C76616C7565596E673D69734E614E2876616C7565596E67293F30';
wwv_flow_api.g_varchar2_table(20) := '3A76616C7565596E672C76616C7565596E673D697346696E6974652876616C7565596E67293F76616C7565596E673A302C6A5175657279286F7074696F6E732E63616C63756C617465292E68746D6C28636F6E766572742876616C7565596E6729297D63';
wwv_flow_api.g_varchar2_table(21) := '617463682865297B76616C7565596E673D302C6A5175657279286F7074696F6E732E63616C63756C617465292E68746D6C2876616C7565596E67297D7D656C73657B76617220745374723D537472696E672876616C7565596E67293B7472797B76616C75';
wwv_flow_api.g_varchar2_table(22) := '65596E673D7061727365466C6F6174286576616C2874537472292C3130292C76616C7565596E673D69734E614E2876616C7565596E67293F303A76616C7565596E672C76616C7565596E673D697346696E6974652876616C7565596E67293F76616C7565';
wwv_flow_api.g_varchar2_table(23) := '596E673A302C6A5175657279286F7074696F6E732E63616C63756C617465292E68746D6C28636F6E766572742876616C7565596E6729297D63617463682865297B76616C7565596E673D302C6A5175657279286F7074696F6E732E63616C63756C617465';
wwv_flow_api.g_varchar2_table(24) := '292E68746D6C2876616C7565596E67297D7D6F7074696F6E732E6F6E63616C63756C61746526266F7074696F6E732E6F6E63616C63756C6174652876616C7565596E67297D656C73652069734E614E287061727365466C6F61742876616C7565596E672C';
wwv_flow_api.g_varchar2_table(25) := '313029293F2876616C7565596E673D302C6A5175657279286F7074696F6E732E63616C63756C617465292E68746D6C2876616C7565596E6729293A6A5175657279286F7074696F6E732E63616C63756C617465292E68746D6C28636F6E76657274287061';
wwv_flow_api.g_varchar2_table(26) := '727365466C6F61742876616C7565596E672C31302929292C6F7074696F6E732E6F6E656E6463616C63756C61746526266F7074696F6E732E6F6E656E6463616C63756C6174652876616C7565596E67293B6F7074696F6E732E6F6E696E70757426266F70';
wwv_flow_api.g_varchar2_table(27) := '74696F6E732E6F6E696E70757428746869732C652E6B6579436F6465297D292C6F7074696F6E732E6F6E726561647926266F7074696F6E732E6F6E72656164792874686973297D297D3B';
null;
end;
/
begin
wwv_flow_api.create_plugin_file(
 p_id=>wwv_flow_api.id(81683221655971563)
,p_plugin_id=>wwv_flow_api.id(81682659269972793)
,p_file_name=>'jquery.abacus.min.js'
,p_mime_type=>'application/javascript'
,p_file_charset=>'utf-8'
,p_file_content=>wwv_flow_api.varchar2_to_blob(wwv_flow_api.g_varchar2_table)
);
end;
/
begin
wwv_flow_api.import_end(p_auto_install_sup_obj => nvl(wwv_flow_application_install.get_auto_install_sup_obj, false), p_is_component_import => true);
commit;
end;
/
set verify on feedback on define on
prompt  ...done
